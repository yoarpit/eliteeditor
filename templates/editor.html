{% extends "index.html" %}
{% block editor %}

<div class="container mt-5">
    <h1 class="text-center mb-4">Flask + OpenCV Image Editor</h1>
    
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <!-- Form for Image Upload -->
            <form action="/" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="file" class="form-label">Upload an image</label>
                    <input type="file" class="form-control" id="file" name="file" required>
                </div>

                <!-- Image Processing Options -->
                <div class="mb-3">
                    <label for="width" class="form-label">Width (px)</label>
                    <input type="number" class="form-control" id="width" name="width" placeholder="Enter width">
                </div>

                <div class="mb-3">
                    <label for="height" class="form-label">Height (px)</label>
                    <input type="number" class="form-control" id="height" name="height" placeholder="Enter height">
                </div>

                <div class="mb-3">
                    <label for="angle" class="form-label">Rotation Angle (degrees)</label>
                    <input type="number" class="form-control" id="angle" name="angle" placeholder="Enter angle">
                </div>

                <!-- Flip Options -->
                <div class="mb-3">
                    <label for="flip" class="form-label">Flip Image</label>
                    <select class="form-select" id="flip" name="flip">
                        <option value="none">None</option>
                        <option value="horizontal">Horizontal</option>
                        <option value="vertical">Vertical</option>
                    </select>
                </div>

                <!-- Blurring -->
                <div class="mb-3">
                    <label for="blur" class="form-label">Blur Size</label>
                    <input type="number" class="form-control" id="blur" name="blur" placeholder="Enter odd number for Gaussian blur">
                </div>

                <!-- Contrast -->
                <div class="mb-3">
                    <label for="contrast" class="form-label">Contrast (1.0 to 3.0)</label>
                    <input type="range" class="form-control" id="contrast" name="contrast" min="1" max="3" step="0.1" value="1.0">
                </div>

                <!-- Filters -->
                <div class="mb-3">
                    <label for="filter" class="form-label">Apply Filter</label>
                    <select class="form-select" id="filter" name="filter">
                        <option value="none">None</option>
                        <option value="grayscale">Grayscale</option>
                        <option value="sepia">Sepia</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Upload and Process</button>
            </form>
        </div>
    </div>

    {% if processed_image %}
        <div class="mt-5">
            <h3>Processed Image</h3>
            <img src="data:image/png;base64,{{ processed_image|tojson }}" class="img-fluid rounded mx-auto d-block" alt="Processed Image">
            <a href="{{ url_for('static', filename='processed/' + filename) }}" class="btn btn-success mt-3" download>Download Processed Image</a>
        </div>
    {% endif %}
</div>








{% endblock %}